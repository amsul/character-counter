/*!
 * jQuery Character Counter v1.0.1 â€” by Amsul
 * https://github.com/amsul/character-counter
 *
 * Freely licensed under a Creative Commons Attribution 3.0 Unported License.
 * License: http://creativecommons.org/licenses/by/3.0/
 */
(function(b){var e=function(i,h){var g={},f=/MSIE\ 7\.0/i.test(navigator.userAgent);if(f||i.type!=="textarea"){return false}g.keypress=function(k){var j=(g.$elem[0].selectionEnd!==g.$elem[0].selectionStart);g.update();if(!j){if(String.fromCharCode(k.charCode).length&&g._length+1>g._maxlength){k.preventDefault()}}return g};g.pasteEvent=function(l){var j={},k=this;l.preventDefault();if(window.getSelection){j.selected=window.getSelection().toString();j.start=k.selectionStart;j.end=k.selectionEnd;j.pastedOriginal=(l.originalEvent.clipboardData)?l.originalEvent.clipboardData.getData("text"):window.clipboardData.getData("Text")}else{j=a(k);j.selected=g._value.substr(j.start,(j.end-j.start));j.pastedOriginal=window.clipboardData.getData("Text")}j.startText=k.value.substr(0,j.start);j.endText=k.value.substr(j.end);j.charsRemaining=g.options.maxChars-(j.startText.length+j.endText.length);j.pastedText=j.pastedOriginal.substr(0,j.charsRemaining);if(!j.charsRemaining){return g}g._value=j.startText+j.pastedText+j.endText;g.trim().setCaret(k,j).update().print();return g};g.setCaret=function(k,j){var l=j.start+j.pastedText.length;if(window.getSelection){k.setSelectionRange(l,l)}else{setTimeout(function(){d(k,l,l)},0)}return g};g.count=function(){g.update().print();return g};g.update=function(){g._value=g.$elem.val();g._length=g._value.length;return g};g.trim=function(){g.$elem[0].value=g._value.substr(0,g._maxlength);return g};g.print=function(){if(g._maxlength<g._length){g._length=g._maxlength}g.$counter[0].innerHTML=g._maxlength-g._length+" "+g.options.msgCharsLeft;return g};g.initialize=(function(){g.options=b.extend({},c,h);g._maxlength=g.options.maxChars;g.$elem=b(i);g.$counter=b('<div class="js-charCounter" />');g.$elem[g.options.appendMethod](g.$counter).on({keypress:g.keypress,"input keyup cut":g.count,paste:g.pasteEvent});return g})();return g},a=function(j){var m=0,h=0,l,i,g,f,k;if(typeof j.selectionStart==="number"&&typeof j.selectionEnd==="number"){m=j.selectionStart;h=j.selectionEnd}else{i=document.selection.createRange();if(i&&i.parentElement()===j){f=j.value.length;l=j.value.replace(/\r\n/g,"\n");g=j.createTextRange();g.moveToBookmark(i.getBookmark());k=j.createTextRange();k.collapse(false);if(g.compareEndPoints("StartToEnd",k)>-1){m=h=f}else{m=-g.moveStart("character",-f);m+=l.slice(0,m).split("\n").length-1;if(g.compareEndPoints("EndToEnd",k)>-1){h=f}else{h=-g.moveEnd("character",-f);h+=l.slice(0,h).split("\n").length-1}}}}return{start:m,end:h}},d=function(h,i,f){var g=h.createTextRange();g.collapse(true);g.moveStart("character",i);g.moveEnd("character",f-i);g.select()},c={maxChars:100,maxCharsWarning:80,msgCharsLeft:"characters left",msgWarningColor:"#F00",appendMethod:"after"};b.fn.charCounter=function(f){return this.each(function(){if(!b.data(this,"charCounting")){b.data(this,"charCounting",e(this,f))}})}})(jQuery);